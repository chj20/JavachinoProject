<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+KR%3A500%2C700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro%3A500%2C700">
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/mypage/mypageTravel.css">
    <link rel="stylesheet" href="/css/header/header.css">
    <link rel="stylesheet" href="/css/footer/footer.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>mypage-profile</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js" integrity="sha384-nHGZxOCfPIKnRfMCsb5sy8GfnmUjF0zUbSHEA0R5MUYD6FpXw6boPkTtIj0kl3V6" crossorigin="anonymous"></script>
</head>
<body>
    <!--Header-->
    <nav class="navbar navbar-expand-lg  fixed-top">
        <div class="container-fluid">
            <div class="p-1 flex-lg-fill">
                <div class="header-logo-search">
                    <a class="navbar-brand" href="#">
                        <img src="/images/header/TripJava.png" id="logoImg">
                    </a>
                    <div class="searchBox">
                        <form class="search">
                            <div class="input-group" style="margin-top: 10px;">
                                <span class="input-group-text" id="search-icon">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                </span>
                                <input class="form-control" type="search" placeholder="도시를 검색해보세요" aria-label="search">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="p-1 flex-lg-fill">
                <div class="row g-0">
                    <div class="col">
                        <a class="nav-link" href="#">
                            <img src="/images/header/accomodation.png" id="accomodationImg">
                            <span id="menuText">숙박</span>
                        </a>
                    </div>
                    <div class="col">
                        <a class="nav-link" href="#">
                            <img src="/images/header/bikini.png" id="bikiniImg">
                            <span id="menuText">액티비티</span>
                        </a>
                    </div>
                    <div class="col">
                        <a class="nav-link" href="#">
                            <img src="/images/header/user-group.png" id="user-groupImg">
                            <span id="menuText">커뮤니티</span>
                        </a>
                    </div>
                </div>
            </div>
                <div class="p-3" style="border: transparent;" >
                    <div class="row" id="header-btn-group">
                        <div class="col">
                            <a href="/header/original_login" >
							   <button type="button" id="btn-login">
                                    <span class="login" id="btnText">로그인</span>
                                </button>
                            </a>
                        </div>
                        <div class="col">
                            <a  href="/header/original_join" >
                                <button type="button" id="btn-join">
                                    <span class="join" id="btnText">회원가입</span>
                                </button>
                            </a>
                        </div>
                    </div>
                </div>
        </div>
    </nav>

    <!--Mypage_Profile-->
    <div class="container overflow-hidden text-center" id="MyPage_Profile">
        <div class="title">
            <p>My Travel</p>
        </div>
        
        <div class="row gx-5">
            <!--left-->
            <div class="col-3">
                <div class="p-3">
			<img th:if="${u.usersFname != null and u.usersFname != ''}"
             	th:src="@{/images/mypage/__${u.usersFname}__}" id="userImg" style="border-radius: 5px;"/>
        	<img th:unless="${u.usersFname != null and u.usersFname != ''}"
             	src="/images/mypage/user.png" id="userImg" style="border-radius: 5px;"/>
                    <h5 id="userName" th:text="${u.usersName}"></h5>
                    <div class="row" id="profileLeft">
                        <div class="col">
                            <a href="/mypage/mypageProfile">
                                <span><i class="fa-solid fa-gear fa-sm" style="color: #000000;"></i>&nbsp;&nbsp;&nbsp;프로필관리</span>
                            </a>
                        </div>
                        <div class="col">
                            <a href="/mypage/mypageWishlist_Accomodation">
                                <span><i class="fa-regular fa-heart fa-sm" style="color: #000000;"></i>&nbsp;&nbsp;&nbsp;위시리스트</span>
                            </a>
                        </div>
                        <div class="col">
                            <a href="/mypage/mypageTravel_Accomodation">
                                <span><i class="fa-solid fa-suitcase-rolling fa-sm" style="color: #000000;"></i>&nbsp;&nbsp;&nbsp;내여행</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!--right-->
            <div class="col-6">
				<div style="display: flex; align-items: flex-start; margin-left: 10px; column-gap: 10px;">
				    <a href="/mypage/mypageTravel_Accomodation" style="text-decoration: none;">
				        <button style="border-radius: 10px; border-color: transparent;">숙박</button>
				    </a>
				    <a href="/mypage/mypageTravel_Activity" style="text-decoration: none;">
				        <button style="border-radius: 10px; border-color: transparent;">액티비티</button>
				    </a>
				</div>
                <div class="p-1" >
                    <div class="row d-grid gap-3" >
                        <!--card2_1-->
                        <div class="col-xl-12" id="cards" >	
							<div th:each="payAcc : ${payAccList}">
                               <div class="card text-center shadow-sm bg-body-tertiary rounded" style="margin-bottom: 20px;">
								<div class="card-header" style="display: flex; justify-content: left; align-items: center;">
								    <span class="badge bg-secondary">
										
								        <span th:if="${#dates.createNow().before(payAcc.accomodation_rv_date)}">이용예정</span>
								        <span th:unless="${#dates.createNow().before(payAcc.accomodation_rv_date)}">이용완료</span>
								    
								    </span>
								    <div th:text="${#dates.format(payAcc.accomodation_rv_date, 'yyyy-MM-dd')}"></div>
								</div>                           
                                <div class="card-body">
                                    <div class="container text-center">
                                        <div class="row align-items-center g-1">
                                            <div class="col-3">
                                                <img th:src="@{/images/mypage/__${payAcc.accomodation_file_fname}__}" class="img-thumbnail rounded" style="max-width: 120px; max-height: 120px"/>
                                            </div>
                                            <div class="col-6" style="text-align: left;">
						                         <p class="card-text"><div th:text="*{payAcc.accomodation_name}"></div></p>
                                            </div>
                                            <div class="col-3 d-flex justify-content-end">
                                                <div class="d-grip gap2">
                                                	<div class="d-grip gap2">
													    <div th:if="${#dates.createNow().before(payAcc.accomodation_rv_date)}">
													        <a href="#" class="btn btn-sm btn-light mb-3 d-block" id="writereviewBtn" data-bs-toggle="modal" 
													           th:data-bs-target="'#reviewModal-' + ${payAcc.pay_no}">리뷰 작성하기</a>
													    </div>
													    <div th:unless="${#dates.createNow().before(payAcc.accomodation_rv_date)}">
													        <a href="#" class="btn btn-sm btn-light mb-3 d-block" id="cancelBtn" data-bs-toggle="modal" 
													           th:data-bs-target="'#cancelModal-' + ${payAcc.pay_no}">예약 취소하기</a>
													    </div>
													    <a href="#" class="btn btn-sm btn-light mb-3 d-block" id="receiptBtn" data-bs-toggle="modal" 
													       th:data-bs-target="'#receiptModal-' + ${payAcc.pay_no}">영수증 확인하기</a>
													</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                	</div>
                            	</div>
                            </div>							
                        </div>                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--footer-->
    <div class="footer grid-line">
        <div class="footer-text">
            상호명 (주)강원치노 | 대표 자바치노 | 개인정보보호책임자 김자반 | 사업자등록번호 200-81-00000 사업자정보확인 | 통신판매업신고번호 2023-서울마포-1234 | 관광사업등록번호 : 제2023-99호
            <br>
            주소 : 서울특별시 마포구 청춘대로 79 20층 (행복동, 자바치노아자자빌딩) | 이메일 help@javachino.com | 광고/제휴 문의 partnership@javachino.com | 고객문의 070-1234-5678
            <br>
            <br>
            자사는 서울특별시관광협회 공제영업보증보험에 가입되어 있습니다. 영업보증보험: 1.5억원 / 기획여행보증: 2억원
            <br>
            마이리얼트립은 통신판매중개자이며 통신판매의 당사자가 아닙니다. 따라서 상품·거래정보 및 거래에 대하여 책임을 지지 않습니다.
            <br>
            부득이한 사정에 의해 확정된 여행일정이 변경되는 경우 여행자의 사전 동의를 받습니다.
        </div>
    </div>

    <!--Modal-->
<div th:each="payAcc : ${payAccList}">
	
    <!--예약 취소 모달-->
    <div class="modal" th:id="'cancelModal-' + ${payAcc.pay_no}">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: rgb(162, 190, 231);">
                    <h4 class="modal-title">예약취소</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="cancelImg" style="margin: 10px; display: flex; align-items: center; justify-content: center;">
                        <img th:src="@{/images/mypage/__${payAcc.accomodation_file_fname}__}" style="width: 100px; height: 100px;">
                        <p><div th:text="*{payAcc.accomodation_name}"></div></p>
                    </div>
                    <p style="text-align: center;">예약을 취소하시겠습니까?</p>
                </div>
                <div class="modal-footer" style=" background-color: rgb(162, 190, 231);">
                    <button type="button" class="btn" style="background-color: #ffffff;" data-bs-dismiss="modal">예</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">아니오</button>
                </div>
            </div>
        </div>
    </div>

    <!--영수증 확인 모달-->
    <div class="modal" th:id="'receiptModal-' + ${payAcc.pay_no}">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: rgb(162, 190, 231);">
                    <div data-bs-theme="dark">
                        <button type="button" class="btn-close" aria-label="Close" data-bs-dismiss="modal"></button>
                    </div>
                </div>
                <div class="modal-body" style="margin: 10px;">
                    <h1>결제 영수증</h1>
                    <div class="receiptImg" style="margin: 50px;">
						<img th:src="@{/images/mypage/__${payAcc.accomodation_file_fname}__}" style="width: 100px; height: 100px;">
                        <div th:text="*{payAcc.accomodation_name}"></div>
                    </div>
                    <div class="receiptText" style="margin: 15px;">
                        <h5>결제번호</h5>
                        <span><div th:text="*{payAcc.pay_no}"></div></span>
                        <hr>
                        <h5>결제일</h5>
                        <span><div th:text="${#dates.format(payAcc.accomodation_rv_date, 'yyyy-MM-dd')}"></div></span>
                        <hr>
                        <h5>결제금액</h5>
                        <span><div th:text="*{payAcc.pay_price}"></div></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--리뷰 작성 모달-->
    <div class="modal" th:id="'reviewModal-' + ${payAcc.pay_no}" >
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style=" background-color: rgb(162, 190, 231);">후기 작성하기</div>
                <div class="modal-body">
                    <div class="receiptImg" style="margin: 10px;">
						<img th:src="@{/images/mypage/__${payAcc.accomodation_file_fname}__}" style="width: 100px; height: 100px;">
                        <div th:text="*{payAcc.accomodation_name}"></div>
                    </div>
                    <div class="row">
                        <div class="col">star</div>
                        <div class="col"><div th:text="${#dates.format(payAcc.accomodation_rv_date, 'yyyy-MM-dd')}"></div>
                    </div>
                    <textarea cols="55" rows="3" class="form-control" placeholder="리뷰를 작성해주세요."></textarea>
                </div>
                <div class="modal-footer" >
                    <button type="button" class="btn" style="background-color: #ffffff;border-color: black;" data-bs-dismiss="modal">완료</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                </div>
            </div>
        </div>
    </div>
    
    <!--내 후기 보기 모달-->
    <div class="modal" id="showreviewModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: rgb(162, 190, 231);">
                    <div data-bs-theme="dark">
                        <button type="button" class="btn-close" aria-label="Close" data-bs-dismiss="modal"></button>
                    </div>
                </div>
                <div class="modal-body" style="margin: 10px;">
                    <h1>My Review</h1>
                    <div class="receiptImg" style="margin: 50px;">
                        <img src="images/mypage/haribo.png" style="width: 100px; height: 100px;">
                        [부산]노티드 100주년 기념전
                    </div>
                    <div class="receiptText" style="margin: 15px;">
                        <div class="row">
                            <div class="col">star</div>
                            <div class="col">2023.07.31 17:19</div>
                        </div>
                        <div>
                            <span>개꿀잼! 강추합니다~~</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
   </div>
  </body>
</html>
